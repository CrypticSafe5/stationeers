# Constants
define pressureMax 40000 # TODO
define tempMax 1500 # TODO

# Devices
alias pressureDial d0
alias pressureReg d1
alias tempDial d2
alias tempReg d3
alias personSensor d4

main:
jal setPressure
jal setTemp
jal setLights
j main

setLights:
# If person is detected, turn on lights
l r0 personSensor count # TODO
push ra
bgtal r0 0 setLightsOn
beqal r0 0 setLightsOff
pop ra
j ra

setLightsOn:
sb HASH("StructureWallLight") On 1 # TODO
j ra

setLightsOff:
sb HASH("StructureWallLight") On 0 # TODO
j ra

setPressure:
# Check that reg is not above max
# If value is not dial value, set
l r0 pressureDial pressure # TODO
push ra
bltal r0 pressureMax setTargetPressure
beqal r0 pressureMax setTargetPressure
bgtal r0 pressureMax setMaxPressure
pop ra
j ra

setTargetPressure:
s pressureReg pressure r0 # TODO
j ra

setMaxPressure:
s pressureReg pressure pressureMax # TODO
j ra

setTemp:
# Check that temp is not above max
# If value is not dial value, set
l r0 tempDial temperature # TODO
push ra
bltal r0 tempMax setTargetTemp
beqal r0 tempMax setTargetTemp
bgtal r0 tempMax setMaxTemp
pop ra
j ra

setTargetTemp:
s tempReg pressure r0 # TODO
j ra

setMaxTemp:
s tempReg pressure tempMax # TODO
j ra
